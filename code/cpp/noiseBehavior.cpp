//=============================================================================
// プレイヤーの行動
//=============================================================================

//=============================================================================
// インクルードファイル
//=============================================================================
#include "main.h"
#include "noiseBehavior.h"
#include "renderer.h"
#include "ShaderManager.h"
#include "shader.h"
#include "forwardShader2D.h"

//=============================================================================
// グローバル変数
//=============================================================================
#define NOISE_SIZE (0.04f)
#define NOISE_ADD (0.05f)

//=============================================================================
// クラスの生成
//=============================================================================
CNoiseBehavior::CNoiseBehavior() : CBehavior()
{
}

//=============================================================================
// クラスの破棄
//=============================================================================
CNoiseBehavior::~CNoiseBehavior()
{

}

//=============================================================================
// 初期化
//=============================================================================
void CNoiseBehavior::Init(void)
{

}

//=============================================================================
// 解放
//=============================================================================
void CNoiseBehavior::Uninit(void)
{
	//CShader* Shader = CShaderManager::GetInstance()->Find<CForwardShader2D>();	//シェーダの取得
	//m_Effect = Shader->Get();

	//m_Effect->SetFloat("g_Amplitude", 0.0f);
	//m_Effect->SetFloat("g_Seed", 0.0f);
}

//=============================================================================
// 更新
//=============================================================================
void CNoiseBehavior::Update(void)
{
	CShader* Shader = CShaderManager::GetInstance()->Find<CForwardShader2D>();	//シェーダの取得
	m_Effect = Shader->Get();

	m_Angle += NOISE_ADD;
	m_Angle = RotCorrection(m_Angle);
	m_Effect->SetFloat("g_Amplitude", (NOISE_SIZE * sinf(m_Angle)));
	m_Effect->SetFloat("g_Seed", (rand() % 1000) / 1000.0f);
}

//=============================================================================
// 当たった瞬間
//=============================================================================
void CNoiseBehavior::CollisionTrigger(CObject * Object)
{
	
}

//=============================================================================
// 当たりつづけている
//=============================================================================
void CNoiseBehavior::CollisionEnter(CObject * Object)
{

}

//=============================================================================
// 離れた瞬間
//=============================================================================
void CNoiseBehavior::CollisionRelease(CObject * Object)
{

}