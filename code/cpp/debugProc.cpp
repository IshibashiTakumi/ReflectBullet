//=============================================================================
// デバック表示
//=============================================================================

//=============================================================================
// scanfのwoming対策
//=============================================================================
#define _CRT_SECURE_NO_WARNINGS

//=============================================================================
// インクルードファイル
//=============================================================================
#include "main.h"
#include "debugProc.h"
#include "renderer.h"

//=============================================================================
// グローバル変数
//=============================================================================
CDebugProc* CDebugProc::Instance = NULL;	//インスタンス初期化

//=============================================================================
// クラスの生成
//=============================================================================
CDebugProc::CDebugProc()
{
	m_pFont = NULL;
}

//=============================================================================
// クラスの破棄
//=============================================================================
CDebugProc::~CDebugProc()
{

}

//=============================================================================
// デバック情報の初期化
//=============================================================================
void CDebugProc::Init( void )
{
	
	LPDIRECT3DDEVICE9 pDevice = CRenderer::GetInstance() -> GetDevice( ); //デバイスの取得
	D3DXCreateFont( pDevice, 18, 0, 0, 0, FALSE, SHIFTJIS_CHARSET, OUT_DEFAULT_PRECIS, DEFAULT_QUALITY, DEFAULT_PITCH, "Terminal", &m_pFont );
	m_aStrDebug.clear();
}
//=============================================================================
// デバックの解放
//=============================================================================
void CDebugProc::Uninit( void )
{
	ResourceRelease(m_pFont);	//フォントへのポインタの解
}

//=============================================================================
// デバックの描画
//=============================================================================
void CDebugProc::Draw( void )
{
	RECT rect = { 0, 0, SCREEN_WIDTH, SCREEN_HEIGHT };

	if (m_aStrDebug.size() == 0) return;

	#ifdef _DEBUG
		m_pFont -> DrawText( NULL, &m_aStrDebug[0], -1, &rect, DT_LEFT, D3DCOLOR_RGBA( 255, 255, 255, 255 ) );
	#endif

	m_aStrDebug.clear();
}

//=============================================================================
// デバックの入力
//=============================================================================
void CDebugProc::PrintDebugProc(string str, ...)
{
	va_list arg;
	char aStr[124];
	/* 可変引数リスト初期化 */
	va_start( arg, str);

	/* 可変個の引数を取り出し */
	vsprintf(aStr, str.c_str(), arg );

	m_aStrDebug += aStr;

	/* 可変引数リスト終了 */
	va_end( arg );
}